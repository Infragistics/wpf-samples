<framework:SampleContainer x:Class="IGPivotGrid.Samples.Styling.DataSelector"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      mc:Ignorable="d"
      d:DesignHeight="500" d:DesignWidth="700"
      Title="DataSelector Page"
      xmlns:framework="clr-namespace:Infragistics.Samples.Framework;assembly=Infragistics.Samples.Shared"
      xmlns:ig="http://schemas.infragistics.com/xaml"
      xmlns:igPrim="http://schemas.infragistics.com/xaml/primitives"
      xmlns:local="clr-namespace:IGPivotGrid.Samples.Controls">

    <framework:SampleContainer.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/IGPivotGrid;component/Assets/Global.xaml" />
                <ResourceDictionary Source="/IGPivotGrid;component/Themes/RoyalLight.xamPivotGrid.xaml" />
            </ResourceDictionary.MergedDictionaries>
            
            <SolidColorBrush x:Key="CloseBrush" Color="White"/>
          <SolidColorBrush x:Key="ArrowHoverBorderBrush" Color="#FF2788B1" />
             <SolidColorBrush x:Key="DarkGrayBorderBrush" Color="#FF505050" />
            <LinearGradientBrush x:Key="ToggleButtonBackgroundBrush" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF696969" />
                <GradientStop Color="#FF3E3E3E" Offset="1" />
            </LinearGradientBrush>
             <SolidColorBrush x:Key="ToggleButtonBorderBrush" Color="#FF3E3E3E" />
              <SolidColorBrush x:Key="ToggleButtonHoverBorderBrush" Color="#FF2788B1" />
              <SolidColorBrush x:Key="ToggleButtonPressedBorderBrush" Color="#FF2788B1" />
              <SolidColorBrush x:Key="ToggleButtonFocusedBorderBrush" Color="#FF3BB7EB" />
            <SolidColorBrush x:Key="ComboBoxItemHoverBorderBrush" Color="#FF2788B1" />
             <LinearGradientBrush x:Key="ToggleButtonPressedBackgroundBrush" StartPoint="0,0 " EndPoint="0,1 ">
                 <GradientStop  Color="#FF3BB7EB" Offset="1" />
                 <GradientStop Color="#FF2788B1" />
             </LinearGradientBrush>
            <LinearGradientBrush x:Key="ToggleButtonHoverBackgroundBrush" StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#FF2788B1"  />
                <GradientStop Color="#FF3BB7EB" Offset="1" />
            </LinearGradientBrush>
            <ig:PivotStringSettings x:Key="LocalizedStrings"/>
            <LinearGradientBrush x:Key="GridBorderBrush" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FF5C5C5C"/>
                <GradientStop Color="#FF787878" Offset="1"/>
            </LinearGradientBrush>
            <LinearGradientBrush x:Key="UpdateButtonHoverBrush" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FF3B3B3B"/>
                <GradientStop Color="#FF767676" Offset="1"/>
            </LinearGradientBrush>
            <LinearGradientBrush x:Key="CubeDropdownSeparatorDarkBrush" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF767676" Offset="0"/>
                <GradientStop Color="#FF909090" Offset="1"/>
            </LinearGradientBrush>
            <SolidColorBrush x:Key="ItemHottrackOuterBorderFill" Color="#FF247BA2"/>
            <SolidColorBrush x:Key="ItemHottrackCenterFill" Color="#FF565656"/>
            <LinearGradientBrush x:Key="DropIndicatorFill" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF777777" Offset="0"/>
                <GradientStop Color="#FF8E8E8E" Offset="1"/>
            </LinearGradientBrush>
            <LinearGradientBrush x:Key="PopupBackgroundBrush" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FFB4B4B4" Offset="1"/>
                <GradientStop Color="#FFE9E9E9"/>
            </LinearGradientBrush>
            <LinearGradientBrush x:Key="DarkGradientBrush" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FF0E5372" Offset="1"/>
                <GradientStop Color="#FF49A4CC"/>
            </LinearGradientBrush>
            <LinearGradientBrush x:Key="UpdateButtonPressedBrush" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FF606060" Offset="0"/>
                <GradientStop Color="#FF333333" Offset="1"/>
            </LinearGradientBrush>
            <SolidColorBrush x:Key="LightForegroundBrush" Color="White"/>
            <DataTemplate x:Key="dragTemplate">
                <Grid>
                    <Border BorderBrush="{StaticResource ItemHottrackOuterBorderFill}" BorderThickness="1" Background="{StaticResource ItemHottrackCenterFill}" CornerRadius="2" Opacity="0.65">
                        <TextBlock Margin="3,1" Text="{Binding Data.Caption}"/>
                    </Border>
                </Grid>
            </DataTemplate>
            <ig:ObjectTypeToDataObjectConverter x:Key="ObjectTypeToDataObjectConverter"/>
            <igPrim:BoolToVisibilityConverter x:Key="boolToVisibilityConverter"/>
       
            <Style TargetType="ig:XamDataTreeNodeControl" x:Key="TreeNodeStyle1" />
           
  <Style x:Key="FilterDropdownToggle1" TargetType="ToggleButton">
    <Setter Property="Background" Value="{StaticResource ComboBoxBackgroundBrush}" />
    <Setter Property="BorderBrush" Value="{StaticResource ComboBoxBorderBrush}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Foreground" Value="#FFFFFFFF" />
    <Setter Property="Padding" Value="5,0,5,0" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ToggleButton">
          <Grid>
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="hover" d:IsOptimized="True" />
                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="arrowHover" d:IsOptimized="True" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Pressed">
                  <Storyboard>
                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="pressed" d:IsOptimized="True" />
                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="arrowHover" d:IsOptimized="True" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="22" />
            </Grid.ColumnDefinitions>
            <Rectangle Fill="Transparent" HorizontalAlignment="Stretch" />
            <Rectangle x:Name="normal" Fill="{StaticResource ToggleButtonBackgroundBrush}" Stroke="{StaticResource ToggleButtonBorderBrush}" RadiusX="3" Grid.Column="1" RadiusY="3" Width="{Binding Height, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
			<Rectangle x:Name="hover" Fill="{StaticResource ToggleButtonHoverBackgroundBrush}" Stroke="{StaticResource ToggleButtonHoverBorderBrush}" RadiusX="3" Grid.Column="1" RadiusY="3" Opacity="0" />
			<Rectangle x:Name="pressed" Fill="{StaticResource ToggleButtonPressedBackgroundBrush}" Stroke="{StaticResource ToggleButtonPressedBorderBrush}" RadiusX="3" Grid.Column="1" RadiusY="3" Opacity="0" />
			 <Path x:Name="BtnArrow" Stretch="Uniform" Height="4" Fill="White" Data="F1 M 301.14,-189.041L 311.57,-189.041L 306.355,-182.942L 301.14,-189.041 Z" Grid.Column="1" UseLayoutRounding="False" VerticalAlignment="Center" HorizontalAlignment="Center" />
            <Path HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}" Height="7" Width="10" Stretch="Fill" Opacity="1" Data="M 17,19 C17,19 12,26 12,26 12,26 7,19 7,19 7,19 17,19 17,19 z" Stroke="{StaticResource DarkGrayBorderBrush}" Fill="{TemplateBinding Foreground}" Grid.Column="1" StrokeThickness="{TemplateBinding BorderThickness}" />
            <Path x:Name="arrowHover" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}" Height="7" Width="10" Stretch="Fill" Opacity="0" Data="M 17,19 C17,19 12,26 12,26 12,26 7,19 7,19 7,19 17,19 17,19 z" Stroke="{StaticResource ArrowHoverBorderBrush}" Fill="{TemplateBinding Foreground}" Grid.Column="1" StrokeThickness="{TemplateBinding BorderThickness}" />
            </Grid>            
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
             <!-- *********************************  ComboBoxItem Style  ********************************* -->
  <Style x:Key="ComboBoxItemStyle" TargetType="ComboBoxItem">
    <Setter Property="Padding" Value="5,0,5,2" />
    <Setter Property="HorizontalContentAlignment" Value="Left" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="Background" Value="{StaticResource TransparentBrush}" />
    <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="MinHeight" Value="24" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ComboBoxItem">
          <Grid Background="{TemplateBinding Background}">
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="fillColor" />
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentControl" Storyboard.TargetProperty="Foreground">
                      <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource LightForegroundBrush}" />
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Disabled">
                  <Storyboard>
                    <DoubleAnimation Duration="0" To="0.3" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentControl" d:IsOptimized="True" />
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
              <VisualStateGroup x:Name="SelectionStates">
                <VisualState x:Name="Unselected" />
                <VisualState x:Name="Selected" />
                <VisualState x:Name="SelectedUnfocused" />
              </VisualStateGroup>
              <VisualStateGroup x:Name="FocusStates">
                <VisualState x:Name="Focused">
                  <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="FocusVisualElement" Storyboard.TargetProperty="(UIElement.Visibility)">
                      <DiscreteObjectKeyFrame KeyTime="00:00:00">
                        <DiscreteObjectKeyFrame.Value>
                          <Visibility>Visible</Visibility>
                        </DiscreteObjectKeyFrame.Value>
                      </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentControl1" Storyboard.TargetProperty="(UIElement.Visibility)">
                      <DiscreteObjectKeyFrame KeyTime="00:00:00">
                        <DiscreteObjectKeyFrame.Value>
                          <Visibility>Collapsed</Visibility>
                        </DiscreteObjectKeyFrame.Value>
                      </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="contentControl1" d:IsOptimized="True" />
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Unfocused" />
              </VisualStateGroup>
              <VisualStateGroup x:Name="LayoutStates">
                <VisualState x:Name="AfterLoaded" />
                <VisualState x:Name="BeforeLoaded" />
                <VisualState x:Name="BeforeUnloaded" />
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Rectangle x:Name="fillColor" Fill="{StaticResource ComboBoxItemHoverBackgroundBrush}" IsHitTestVisible="False" Opacity="0" Stroke="{StaticResource ComboBoxItemHoverBorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}" />
            <Rectangle x:Name="FocusVisualElement" Stroke="{StaticResource ComboBoxItemFocusedBorderBrush}" Visibility="Collapsed" StrokeThickness="{TemplateBinding BorderThickness}" />
            <ContentControl x:Name="contentControl" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Margin="{TemplateBinding Padding}" Foreground="{TemplateBinding Foreground}">
              <ContentPresenter x:Name="contentPresenter" />
            </ContentControl>
            <ContentControl x:Name="contentControl1" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Opacity="0" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Margin="{TemplateBinding Padding}" Foreground="{TemplateBinding Foreground}">
              <ContentPresenter x:Name="contentPresenter1" />
            </ContentControl>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
           
            <Style x:Key="ButtonStyle" TargetType="Button">
                <Setter Property="Background" Value="{StaticResource DarkGradientBrush}"/>
                <Setter Property="Foreground" Value="#fff"/>
                <Setter Property="Padding" Value="3"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="BorderThickness" Value="0,1"/>
                <Setter Property="BorderBrush">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                            <LinearGradientBrush.GradientStops>
                                <GradientStopCollection>
                                    <GradientStop Color="#FF627684" Offset="0"/>
                                    <GradientStop Color="#BFFFFFFF" Offset="1"/>
                                </GradientStopCollection>
                            </LinearGradientBrush.GradientStops>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Grid>
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal"/>
                                        <VisualState x:Name="MouseOver">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames BeginTime="0" Duration="0" Storyboard.TargetProperty="Fill" Storyboard.TargetName="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource UpdateButtonHoverBrush}"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Pressed">
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames BeginTime="0" Duration="0" Storyboard.TargetProperty="Fill" Storyboard.TargetName="Background">
                                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource UpdateButtonPressedBrush}"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Disabled">
                                            <Storyboard>
                                                <DoubleAnimation Duration="0" To="0.4" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="DisabledVisualElement" d:IsOptimized="True"/>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                    <VisualStateGroup x:Name="FocusStates">
                                        <VisualState x:Name="Focused"/>
                                        <VisualState x:Name="Unfocused"/>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <Border x:Name="Bd" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3">
                                    <Border.BorderBrush>
                                        <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                            <GradientStop Color="#FF414141" Offset="0"/>
                                            <GradientStop Color="#BFC6C6C6" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.BorderBrush>
                                    <Rectangle x:Name="Background" Fill="{StaticResource DarkGradientBrush}" RadiusY="3" RadiusX="3"/>
                                </Border>
                                <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <Rectangle x:Name="DisabledVisualElement" Fill="#FFFFFFFF" IsHitTestVisible="false" Opacity="0" RadiusY="3" RadiusX="3"/>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <!-- *********************************  FilterDropdown Style   ********************************* -->
            <Style x:Key="FilterDropdown" TargetType="ig:Dropdown">
                      <Setter Property="Padding" Value="5,0,5,0" />
        <Setter Property="Margin" Value="0" />
        <Setter Property="MaxHeight" Value="22" />
        <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
        <Setter Property="Background" Value="{StaticResource PopupBackgroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource CheckBoxBorderBrush}" />
        <Setter Property="HorizontalContentAlignment" Value="Left" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ig:Dropdown">
          <Grid x:Name="MainGrid" SnapsToDevicePixels="true" Height="{TemplateBinding MaxHeight}">
            <VisualStateManager.VisualStateGroups>
              <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                <VisualState x:Name="MouseOver">
                  <Storyboard>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="DropDownhover">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="1" />
                    </DoubleAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Disabled">
                  <Storyboard>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="DropDownDisabled">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="0.3" />
                    </DoubleAnimationUsingKeyFrames>
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ContentPresenter">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="0.5" />
                    </DoubleAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
              <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="Focused" />
                <VisualState x:Name="FocusedDropDown">
                  <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="DropDownBorder">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}" />
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
              <VisualStateGroup x:Name="EmptyState">
                <VisualState x:Name="Empty">
                                    <Storyboard>
                    <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="itemText" Storyboard.TargetProperty="(UIElement.Visibility)">
                      <DiscreteObjectKeyFrame KeyTime="00:00:00">
                        <DiscreteObjectKeyFrame.Value>
                          <Visibility>Visible</Visibility>
                        </DiscreteObjectKeyFrame.Value>
                      </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
                <VisualState x:Name="Selected">
                                    <Storyboard>
                    <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="itemText" Storyboard.TargetProperty="(UIElement.Visibility)">
                      <DiscreteObjectKeyFrame KeyTime="00:00:00">
                        <DiscreteObjectKeyFrame.Value>
                          <Visibility>Collapsed</Visibility>
                        </DiscreteObjectKeyFrame.Value>
                      </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                  </Storyboard>
                </VisualState>
              </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
            <Border x:Name="ContentPresenterBorder">
              <Grid>
                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="22" />
                </Grid.ColumnDefinitions>
                                <Rectangle x:Name="DropDownBackground" Fill="{TemplateBinding Background}" RadiusY="3" RadiusX="3" Stroke="{TemplateBinding BorderBrush}" Height="{TemplateBinding MaxHeight}" Grid.ColumnSpan="2" StrokeThickness="{TemplateBinding BorderThickness}" />
                                <Rectangle x:Name="DropDownhover" Height="{TemplateBinding MaxHeight}" Fill="{StaticResource PopupBackgroundBrush}" RadiusY="3" RadiusX="3" Stroke="{StaticResource ToggleButtonFocusedBorderBrush}" StrokeThickness="1" Margin="0" Opacity="0" Grid.ColumnSpan="2" />
                                <ToggleButton Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource FilterDropdownToggle1}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.ColumnSpan="2" />
                                <ContentPresenter x:Name="ContentPresenter" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" IsHitTestVisible="false" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Content="{TemplateBinding SelectionBoxItem}" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" />
                                <TextBlock IsHitTestVisible="False" x:Name="itemText" Text="{TemplateBinding EmptyString}" Margin="5,2,5,0" Visibility="Collapsed" />
              </Grid>
            </Border>
            <Popup x:Name="PART_Popup" Margin="1" AllowsTransparency="true" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Placement="Bottom" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Grid.ColumnSpan="2">
                            <Border x:Name="DropDownBorder" HorizontalAlignment="Stretch" BorderBrush="{StaticResource PopupBorderBrush}" Background="{StaticResource PopupBackgroundBrush}" BorderThickness="1" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                <Border.Effect>
                                    <DropShadowEffect BlurRadius="15" Direction="270" ShadowDepth="1" Opacity="0.26" Color="{StaticResource Color_000}" />
                </Border.Effect>
                <ScrollViewer CanContentScroll="true" BorderThickness="0" Padding="1" Margin="0">
                                    <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" KeyboardNavigation.DirectionalNavigation="Contained" />
                </ScrollViewer>
              </Border>
            </Popup>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
             <!-- ********************************** XamDataTree **********************************-->
  <Style TargetType="ig:XamDataTree" x:Key="DataTreeStyle1">
        <Setter Property="Background" Value="{StaticResource TransparentBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource TransparentBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ig:XamDataTree">
          <Border x:Name="Bd" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
            <Grid>
              <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
              </Grid.RowDefinitions>
              <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
              </Grid.ColumnDefinitions>
                            <igPrim:NodesPanel x:Name="NodesPanel" />
            </Grid>
          </Border>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
            <Style x:Key="XamPivotDataSelectorStyle1" TargetType="ig:XamPivotDataSelector">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ig:XamPivotDataSelector">
                            <Grid x:Name="LayoutRoot" Background="{TemplateBinding Background}" ig:XamPivotGrid.PivotPartType="DeleteArea" ig:TemplatedParentHelper.TemplatedParent="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                <ig:DragDropManager.DropTarget>
                                    <ig:DropTarget DropChannels="Measures, Rows, Columns, Filters, MeasureList" IsDropTarget="True"/>
                                </ig:DragDropManager.DropTarget>
                                <StackPanel Orientation="Horizontal">
                                    <Border x:Name="Bd" Background="{StaticResource DarkGradientBrush}" CornerRadius="4" Padding="5">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0" Margin="0,0,0,5">
                                                 <ig:Dropdown x:Name="DatabasesDropDown" Style="{StaticResource FilterDropdown}" ItemContainerStyle="{StaticResource ComboBoxItemStyle}" ItemsSource="{Binding DataSource.Databases, RelativeSource={RelativeSource TemplatedParent}}" SelectedItem="{Binding DataSource.Database, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Foreground="{StaticResource ForegroundBrush}">
                                                    <ComboBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding Name}"/>
                                                        </DataTemplate>
                                                    </ComboBox.ItemTemplate>
                                                </ig:Dropdown>
                                            </Grid>
                                            <Grid Grid.Row="1" Margin="0,0,0,5">
                                                <ig:Dropdown x:Name="CubesDropDown" Style="{StaticResource FilterDropdown}" ItemContainerStyle="{StaticResource ComboBoxItemStyle}" ItemsSource="{Binding DataSource.Cubes, RelativeSource={RelativeSource TemplatedParent}}" SelectedItem="{Binding DataSource.Cube, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Foreground="{StaticResource ForegroundBrush}">
                                                    <ComboBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding Caption}"/>
                                                        </DataTemplate>
                                                    </ComboBox.ItemTemplate>
                                                </ig:Dropdown>
                                            </Grid>
                                            <Grid Grid.Row="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="0.49*"/>
                                                    <ColumnDefinition Width="0.51*"/>
                                                </Grid.ColumnDefinitions>
                                                <ig:Dropdown x:Name="MeasureGroupsDropDown" Style="{StaticResource FilterDropdown}" ItemContainerStyle="{StaticResource ComboBoxItemStyle}" ItemsSource="{Binding DataSource.MeasureGroups, RelativeSource={RelativeSource TemplatedParent}}" SelectedItem="{Binding DataSource.MeasureGroup, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Grid.ColumnSpan="2" Foreground="{StaticResource ForegroundBrush}">
                                                    <ComboBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding Name}"/>
                                                        </DataTemplate>
                                                    </ComboBox.ItemTemplate>
                                                </ig:Dropdown>
                                            </Grid>
                                            <Border x:Name="DimensionsTreeBd" Background="{StaticResource DarkGradientBrush}" CornerRadius="4" Margin="0,5" Padding="5" Grid.Row="3">
                                                <Grid Background="{StaticResource LightForegroundBrush}">
                                                    <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=StringSetting.DimensionsAreaBackgroundText}" FontSize="12" VerticalAlignment="Center" HorizontalAlignment="Center" Opacity="0.15"/>
                                                    <ig:XamDataTree x:Name="DimensionsTree" ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataSource.Metadata}" Style="{StaticResource DataTreeStyle1}" NodeStyle="{StaticResource TreeNodeStyle1}"  >
                                                        <ig:XamDataTree.ItemTemplate>
                                                            <DataTemplate>
                                                                <ig:XamHierarchicalItem HierarchicalItem="{Binding Path=Data}">
                                                                    <!--<ToolTipService.ToolTip>
                                                                    <ToolTip BorderBrush="{StaticResource Brush_045}" Margin="10 10" Background="{StaticResource Brush_046}" Content="{Binding Data.DataObject.UniqueName}">
                                                                    <ToolTip.ContentTemplate>
                                                                    <DataTemplate>
                                                                    <Border CornerRadius="2"
                                                                    Background="{StaticResource LightGradientBrush}"
                                                                    BorderThickness="1" BorderBrush="{StaticResource GridBorderBrush}" Margin="-10, -5">
                                                                    <TextBlock Margin="2 0 2 0" Text="{Binding}"/>
                                                                    </Border>
                                                                    </DataTemplate>
                                                                    </ToolTip.ContentTemplate>
                                                                    </ToolTip>
                                                                    </ToolTipService.ToolTip>-->
                                                                </ig:XamHierarchicalItem>
                                                            </DataTemplate>
                                                        </ig:XamDataTree.ItemTemplate>
                                                        <ig:XamTriggers.EventTriggers>
                                                            <ig:XamEventTrigger EventName="NodeDraggingStart">
                                                                <ig:DragStartXamDataTreeTriggerAction IsEnabled="True"/>
                                                            </ig:XamEventTrigger>
                                                        </ig:XamTriggers.EventTriggers>
                                                        <ig:XamDataTree.GlobalNodeLayouts>
                                                            <ig:NodeLayout x:Name="NL" IsExpandedMemberPath="ExpandWhenInitialized" Key="Items" TargetTypeName="HierarchicalItem" IsDraggable="True">
                                                            </ig:NodeLayout>
                                                        </ig:XamDataTree.GlobalNodeLayouts>
                                                    </ig:XamDataTree>
                                                </Grid>
                                            </Border>
                                        </Grid>
                                    </Border>
                                    <Border x:Name="ViewModelsBd" Background="{StaticResource UpdateButtonHoverBrush}" CornerRadius="4" Padding="5" Margin="3,0,0,0">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="4"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="5"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="5"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock Grid.ColumnSpan="3" Margin="0,0,0,5" Foreground="White" Text="{Binding PanelCollectionsAreaLabel, Source={StaticResource LocalizedStrings}}"/>
                                            <!--FiltersDropArea-->
                                            <Grid Grid.Row="1">
                                                <Border BorderBrush="{StaticResource GridBorderBrush}" BorderThickness="1" Background="#FFFFFFFF">
                                                    <Grid Background="{StaticResource CubeDropdownSeparatorDarkBrush}">
                                                        <TextBlock FontSize="12" HorizontalAlignment="Center" Opacity="0.15" Text="{Binding FiltersAreaBackgroundText, Source={StaticResource LocalizedStrings}}" VerticalAlignment="Center"/>
                                                        <igPrim:FieldsDropAreaControl
                                                            Grid.ColumnSpan="2"
                                                            x:Name="FiltersDropArea"
                                                            ig:XamPivotGrid.PivotPartType="Filters"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataSource.Filters, Mode=TwoWay}"
                                                            ItemTemplate="{StaticResource FieldItemTemplateKey}">
                                                            <igPrim:FieldsDropAreaControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel
                                                                        Orientation="Vertical"
                                                                        Background="Transparent"
                                                                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                                        ig:XamPivotGrid.PivotPartType="Filters">
                                                                        <ig:DragDropManager.DropTarget>
                                                                            <ig:DropTarget IsDropTarget="True" DropTargetMarkerBrush="#FF6E7E8D" DropChannels="Rows, Columns, Filters"/>
                                                                        </ig:DragDropManager.DropTarget>
                                                                        <ig:ItemsSeparatorProvider.Separator>
                                                                            <ig:PanelItemsSeparator SeparatorColor="#FF6E7E8D"/>
                                                                        </ig:ItemsSeparatorProvider.Separator>
                                                                    </StackPanel>
                                                                </ItemsPanelTemplate>
                                                            </igPrim:FieldsDropAreaControl.ItemsPanel>
                                                        </igPrim:FieldsDropAreaControl>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                            <!--ColumnsDropArea-->
                                            <Grid Grid.Column="2" Grid.Row="1">
                                                <Border BorderBrush="{StaticResource GridBorderBrush}" BorderThickness="1" Background="{StaticResource ItemHottrackOuterBorderFill}">
                                                    <Grid>
                                                        <TextBlock FontSize="12" HorizontalAlignment="Center" Opacity="0.15" Text="{Binding ColumnsAreaBackgroundText, Source={StaticResource LocalizedStrings}}" VerticalAlignment="Center"/>
                                                        <igPrim:FieldsDropAreaControl
                                                            Grid.ColumnSpan="2"
                                                            x:Name="ColumnsDropArea"
                                                            ig:XamPivotGrid.PivotPartType="Columns"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataSource.Columns, Mode=TwoWay}"
                                                            ItemTemplate="{StaticResource FieldItemTemplateKey}">
                                                            <igPrim:FieldsDropAreaControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel
                                                                        Orientation="Vertical"
                                                                        Background="Transparent"
                                                                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                                        ig:XamPivotGrid.PivotPartType="Columns">
                                                                        <ig:DragDropManager.DropTarget>
                                                                            <ig:DropTarget IsDropTarget="True" DropTargetMarkerBrush="#FF6E7E8D" DropChannels="Rows, Columns, Filters, MeasureList"/>
                                                                        </ig:DragDropManager.DropTarget>
                                                                        <ig:ItemsSeparatorProvider.Separator>
                                                                            <ig:PanelItemsSeparator SeparatorColor="#FF6E7E8D"/>
                                                                        </ig:ItemsSeparatorProvider.Separator>
                                                                    </StackPanel>
                                                                </ItemsPanelTemplate>
                                                            </igPrim:FieldsDropAreaControl.ItemsPanel>
                                                        </igPrim:FieldsDropAreaControl>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                            <!--RowsDropArea-->
                                            <Grid Grid.Row="3">
                                                <Border BorderBrush="{StaticResource GridBorderBrush}" BorderThickness="1">
                                                    <Grid Background="{StaticResource ItemHottrackOuterBorderFill}">
                                                        <TextBlock FontSize="12" HorizontalAlignment="Center" Opacity="0.15" Text="{Binding RowsAreaBackgroundText, Source={StaticResource LocalizedStrings}}" VerticalAlignment="Center"/>
                                                        <igPrim:FieldsDropAreaControl
                                                            Grid.ColumnSpan="2"
                                                            x:Name="RowsDropArea"
                                                            ig:XamPivotGrid.PivotPartType="Rows"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataSource.Rows, Mode=TwoWay}"
                                                            ItemTemplate="{StaticResource FieldItemTemplateKey}">
                                                            <igPrim:FieldsDropAreaControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel
                                                                        Orientation="Vertical"
                                                                        Background="Transparent"
                                                                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                                        ig:XamPivotGrid.PivotPartType="Rows">
                                                                        <ig:DragDropManager.DropTarget>
                                                                            <ig:DropTarget IsDropTarget="True" DropTargetMarkerBrush="#FF6E7E8D" DropChannels="Rows, Columns, Filters, MeasureList"/>
                                                                        </ig:DragDropManager.DropTarget>
                                                                        <ig:ItemsSeparatorProvider.Separator>
                                                                            <ig:PanelItemsSeparator SeparatorColor="#FF6E7E8D"/>
                                                                        </ig:ItemsSeparatorProvider.Separator>
                                                                    </StackPanel>
                                                                </ItemsPanelTemplate>
                                                            </igPrim:FieldsDropAreaControl.ItemsPanel>
                                                        </igPrim:FieldsDropAreaControl>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                            <!--MeasuresDropArea-->
                                            <Grid Grid.Column="2" Grid.Row="3">
                                                <Border BorderBrush="{StaticResource GridBorderBrush}" BorderThickness="1" Background="#FFFFFFFF">
                                                    <Grid Background="{StaticResource DropIndicatorFill}">
                                                        <TextBlock FontSize="12" HorizontalAlignment="Center" Opacity="0.15" Text="{Binding MeasuresAreaBackgroundText, Source={StaticResource LocalizedStrings}}" VerticalAlignment="Center"/>
                                                        <igPrim:FieldsDropAreaControl
                                                            Grid.ColumnSpan="2"
                                                            x:Name="MeasuresDropArea"
                                                            ig:XamPivotGrid.PivotPartType="Measures"
                                                            ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataSource.Measures, Mode=TwoWay}"
                                                            ItemTemplate="{StaticResource FieldItemTemplateKey}">
                                                            <igPrim:FieldsDropAreaControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel
                                                                        Orientation="Vertical"
                                                                        Background="Transparent"
                                                                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                                        ig:XamPivotGrid.PivotPartType="Measures">
                                                                        <ig:DragDropManager.DropTarget>
                                                                            <ig:DropTarget IsDropTarget="True" DropTargetMarkerBrush="#FF6E7E8D" DropChannels="Measures"/>
                                                                        </ig:DragDropManager.DropTarget>
                                                                        <ig:ItemsSeparatorProvider.Separator>
                                                                            <ig:PanelItemsSeparator SeparatorColor="#FF6E7E8D"/>
                                                                        </ig:ItemsSeparatorProvider.Separator>
                                                                    </StackPanel>
                                                                </ItemsPanelTemplate>
                                                            </igPrim:FieldsDropAreaControl.ItemsPanel>
                                                        </igPrim:FieldsDropAreaControl>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                            <CheckBox x:Name="DeferredUpdateLayout" Foreground="White" Content="{Binding DeferredUpdateLayoutCheckBoxLabel, Source={StaticResource LocalizedStrings}}" HorizontalAlignment="Stretch" IsChecked="{Binding DataSource.DeferredLayoutUpdate, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Grid.Row="5" VerticalAlignment="Center"/>
                                            <Button x:Name="UpdateLayoutButton" Content="{Binding UpdateLayoutButtonText, Source={StaticResource LocalizedStrings}}" Grid.Column="2" HorizontalAlignment="Stretch" IsEnabled="{Binding IsChecked, ElementName=DeferredUpdateLayout}" Grid.Row="5" Style="{StaticResource ButtonStyle}" VerticalContentAlignment="Center">
                                                <Button.Background>
                                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                                        <GradientStop Color="#FFA3AEB9" Offset="0"/>
                                                        <GradientStop Color="#FF8399A9" Offset="0.37"/>
                                                        <GradientStop Color="#FF718597" Offset="0.3701"/>
                                                        <GradientStop Color="Black" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Button.Background>
                                                <ig:Commanding.Command>
                                                    <ig:XamPivotGridCommandSource CommandType="RefreshGridImmediately" EventName="Click"/>
                                                </ig:Commanding.Command>
                                            </Button>
                                        </Grid>
                                    </Border>
                                </StackPanel>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <local:SampleFlatDataSourceSellerVsProduct x:Key="FlatDataSource"/>
        </ResourceDictionary>
    </framework:SampleContainer.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- #BEGIN SNIPPET# -->
        <ig:XamPivotGrid x:Name="pivotGrid" DataSource="{StaticResource FlatDataSource}"
                         AllowCompactLayout="True"/>
        <ig:Expander Grid.Column="1" IsExpanded="True">
            <ig:XamPivotDataSelector x:Name="dataSelector" DataSource="{StaticResource FlatDataSource}"
                                     Style="{StaticResource XamPivotDataSelectorStyle1}"/>
        </ig:Expander>
        <!-- #END SNIPPET# -->
        <local:PivotGridBusyIndicator x:Name="isBusyIndicator"
                                      Grid.Row="1"
                                      Grid.ColumnSpan="2"
                                      Visibility="Collapsed"/>
    </Grid>
</framework:SampleContainer>
