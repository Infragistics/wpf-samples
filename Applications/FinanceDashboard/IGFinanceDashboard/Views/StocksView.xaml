<framework:NavigationPage 
      x:Class="IGShowcase.FinanceDashboard.Views.StocksView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d" d:DesignHeight="600" d:DesignWidth="1000"
      xmlns:localControls="clr-namespace:IGShowcase.FinanceDashboard.Controls"
      xmlns:ig="http://schemas.infragistics.com/xaml"
      xmlns:framework="clr-namespace:IGExtensions.Framework.Controls;assembly=IGExtensions.Framework" 
      xmlns:commonControls="clr-namespace:IGExtensions.Common.Controls;assembly=IGExtensions.Common" 
      xmlns:localConverters="clr-namespace:IGShowcase.FinanceDashboard.Converters" 
      xmlns:common="clr-namespace:IGExtensions.Common.Controls;assembly=IGExtensions.Common"
    d:DataContext="{d:DesignData ../Assets/Data/StocksSampleData.xaml}"
      DataContext="{StaticResource stockViewModel}"
      >

    <framework:NavigationPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/AppBrushes.xaml"/>
                <ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/AppStyles.xaml"/>
                <ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/StockListBoxStyles.xaml"/>
                <ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/StockAutoCompleteStyles.xaml"/>
                <ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/XamDataChartStyles.xaml"/>
                <ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/XamZoombarStyles.xaml"/>
                <!--<ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/StockAutoCompleteStyles.xaml"/>-->
                <!--<ResourceDictionary Source="/IGShowcase.FinanceDashboard;component/Assets/Styles/StockListBoxStyles.xaml"/>-->
            </ResourceDictionary.MergedDictionaries>
           
            <localConverters:StockChartTypeToBoolConverter x:Key="StockChartTypeToBoolConverter" />
            <localConverters:StringComparisonToBoolValueConverter x:Key="StringComparisonToBoolValueConverter" />
            <!--<localConverters:PositiveNegativeBrushValueConverter x:Key="PositiveNegativeBrushValueConverter"
                                                            StockPositiveChangeColor="{StaticResource GreenText}"
                                                            StockNegativeChangeColor="{StaticResource RedText}" />-->
        </ResourceDictionary>
        
      </framework:NavigationPage.Resources>
    <Grid Background="{StaticResource AppNavigationPageBackground}">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />     <!-- Add/Find Stocks  -->
                <RowDefinition Height="auto"/>        <!-- Watched Stocks 42-->
                <RowDefinition Height="auto" />      <!-- Selected Stock Details -->
                <RowDefinition Height="42" />       <!-- Time Range Filter -->
                <RowDefinition Height="3*" MinHeight="200"/>       <!-- Stock Chart -->
                <RowDefinition Height="auto" />       <!-- splitter -->
                <RowDefinition Height="1*" MinHeight="120" />       <!-- Volume Chart -->
                <RowDefinition Height="88" />       <!-- Zoom bar -->
            </Grid.RowDefinitions>	
            <!-- Header -->
        <Grid Grid.Row="1" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="auto" />
                <!-- Search/Add Stock -->
            </Grid.ColumnDefinitions>

            <Rectangle x:Name="TickerBackground"
                       Grid.ColumnSpan="2"
                       IsHitTestVisible="False"
                       Fill="{StaticResource StockWatchBackground}"/>
      
            <Rectangle x:Name="TickerBackgroundImage"
                           Grid.ColumnSpan="2"
                           IsHitTestVisible="False"
                           Margin="0">
            </Rectangle>

            <!-- Watched Stocks Background="{StaticResource StockWatchBackground}" Height="41" -->
            <StackPanel Orientation="Horizontal"
                       Margin="10,5,0,0"
                        VerticalAlignment="Bottom"
                        >
                <ListBox x:Name="StockListBox"
                         Style="{StaticResource StockListBoxStyle}"
                         ItemsPanel="{StaticResource StockListBoxItemsPanelTemplateH}"
                         ItemTemplate="{StaticResource StockItemTemplate}"
                         ItemContainerStyle="{StaticResource StocksListBoxItemContainerStyle}"
                         ItemsSource="{Binding Path=Tickers}" Margin="0"
                         SelectedItem="{Binding Path=SelectedStock, Mode=OneWay}"
                         SelectionChanged="StockListBox_SelectionChanged"
                         VerticalAlignment="Stretch"
                         BorderThickness="0"
                         />
            </StackPanel>
            <Border Margin="5,5,10,5" HorizontalAlignment="Right" Grid.Column="1"  
                    Background="{StaticResource TickerFindBackground}"  Height="30">

                <!-- Search/Add Stock  Width="332" Background="{StaticResource InputBg}"-->
                <StackPanel Orientation="Horizontal"  VerticalAlignment="Stretch"  >

                    <!--FilterMode="StartsWith"-->
                    <commonControls:AutoCompleteBox x:Name="StocksAutoCompleteBox" Width="200"   
                                               FilterMode="Custom"  Margin="0,0,-1,0" Background="Transparent"
                                               ItemsSource="{Binding Path=StockSearchList, Mode=OneWay}"
                                               ItemTemplate="{StaticResource StockTickerAutoCompleteTemplate}"
                                               DropDownClosed="OnNewSymbolAutoCompleteBox_DropDownClosed"
											   ItemContainerStyle="{StaticResource MainListBoxItemStyle}"
											   Style="{StaticResource MainAutoCompletBoxStyle}"/>
                    
                    <!--<Controls:AutoCompleteBox x:Name="NewSymbolAutoCompleteBox2" ItemsSource="{Binding Path=StockSearchList, Mode=OneWay}"
                                               ></Controls:AutoCompleteBox>-->
                    
                    <Button x:Name="StockAddButton"    
                            Content="{Binding Path=AppStrings.ADD, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                            Command="{Binding Path=AddStockCommand}"
                            CommandParameter="{Binding Path=Text, ElementName=NewSymbolAutoCompleteBox, Mode=OneWay}"
                            Style="{StaticResource MetroButtonStyle}"
                            />
                </StackPanel>
            </Border>
        </Grid>
            
        <!-- Selected Stock Details -->
        <Grid Grid.Row="2"
                RenderTransformOrigin="0.5,0.5"
                Margin="0"
                Background="{StaticResource StockDetailsBackground}">
            <!--DataContext="{Binding Path=SelectedStock.Details, Mode=OneWay}"-->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.5*" />
                <!-- Stock Symbol/Name/LU -->
                <ColumnDefinition Width="0.5*" />
                <!-- Stock Details -->
            </Grid.ColumnDefinitions>

            <localControls:StockDetailsControl Grid.ColumnSpan="2" VerticalAlignment="Center" 
                                              DataContext="{Binding}" SelectedStock="{Binding Path=SelectedStock}"  Margin="10,0,0,0"/>

        </Grid>
        <!-- Time Range Filter and Chart Type Selection -->
        <Grid Grid.Row="3"  Background="{StaticResource ChartTypeSelectionBackground}">
            <!-- Choose Time Range -->
            <StackPanel Orientation="Horizontal"
                         VerticalAlignment="Stretch"
                         d:LayoutOverrides="GridBox" Margin="5,2"  >

                <TextBlock  Text="{Binding Path=AppStrings.Range, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                            Style="{StaticResource ChooseChartTypeTitle}" VerticalAlignment="Center" Margin="5,0,3,0" />
                <!--TODO-MT add 1 week-->
                <StackPanel Orientation="Horizontal">
                    <RadioButton Content="1W" Visibility="Collapsed"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="0.25"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=0.25, Mode=OneWay}"
                              Width="Auto"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_1M_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_1M, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="1"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=1, Mode=OneWay}"
                              Width="Auto"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_1M_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_3M, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="3"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=3, Mode=OneWay}"
                             Width="Auto"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_3M_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_6M, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="6"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=6, Mode=OneWay}"
                             Width="Auto"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_6M_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_1Y, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="12"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=12, Mode=OneWay}"
                             Width="Auto"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_1Y_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_2Y, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="24"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=24, Mode=OneWay}"
                             Width="Auto"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_2Y_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_5Y, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="60"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=60, Mode=OneWay}"
                             Width="Auto"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_5Y_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_10Y, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="120"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=120, Mode=OneWay}"
                             Width="Auto"
                             Margin="0,0,0,0" Visibility="Visible" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_10Y_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                    <RadioButton Content="{Binding Path=AppStrings.RangeFilter_MAX, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                             Style="{StaticResource StockTimeSelctorRadioButtonStyle}"
                             Command="{Binding Path=StockDisplayRangeCommand, Mode=OneWay}"
                             CommandParameter="0"
                             GroupName="TimeRangeFilter"
                             IsChecked="{Binding Path=SelectedStock.RangeFilter, Converter={StaticResource StringComparisonToBoolValueConverter}, ConverterParameter=0, Mode=OneWay}"
                             Width="Auto"
                            Visibility="Visible"
                             Margin="0,0,0,0" >
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.RangeFilter_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.RangeFilter_MAX_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </RadioButton>
                </StackPanel>
            </StackPanel>
            <!-- Choose Chart Type -->
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal" Margin="0,2" >
                <TextBlock  Text="{Binding Path=AppStrings.ChartType, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                            Style="{StaticResource ChooseChartTypeTitle}" VerticalAlignment="Center" Margin="0,0,5,0" />
                <RadioButton Style="{StaticResource ChartTypeRadioButtonStyle}"
                                 GroupName="ChartTypeGroup"
                                 IsChecked="{Binding Path=SelectedChartType, ConverterParameter=Line, Converter={StaticResource StockChartTypeToBoolConverter}, Mode=TwoWay}"
                                 Margin="0,0,6,0"
                                 Cursor="Hand">
                    <ToolTipService.ToolTip>
                        <ToolTip Style="{StaticResource AppToolTipStyle}">
                            <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.ChartType_Line, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.ChartType_Line_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                            </TextBlock>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <Image     Width="46"
                               Source="../Assets/Images/chartType1.png"
                               Stretch="Fill"
                               Margin="0" />
                </RadioButton>
                <RadioButton Style="{StaticResource ChartTypeRadioButtonStyle}"
                                 GroupName="ChartTypeGroup"
                                 IsChecked="{Binding Path=SelectedChartType, ConverterParameter=Area, Converter={StaticResource StockChartTypeToBoolConverter}, Mode=TwoWay}"
                                 Margin="0,0,6,0"
                                 Cursor="Hand">
                    <ToolTipService.ToolTip>
                        <ToolTip Style="{StaticResource AppToolTipStyle}">
                            <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.ChartType_Area, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.ChartType_Area_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                            </TextBlock>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <Image     Width="46"
                               Source="../Assets/Images/chartType3.png"
                               Stretch="Fill"
                               Margin="0" />
                </RadioButton>
                <RadioButton Style="{StaticResource ChartTypeRadioButtonStyle}"
                                 GroupName="ChartTypeGroup"
                                 IsChecked="{Binding Path=SelectedChartType, ConverterParameter=RangeArea, Converter={StaticResource StockChartTypeToBoolConverter}, Mode=TwoWay}"
                                 Margin="0,0,6,0"
                                 Cursor="Hand">
                    <ToolTipService.ToolTip>
                        <ToolTip Style="{StaticResource AppToolTipStyle}">
                            <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.ChartType_RangeArea, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.ChartType_RangeArea_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                            </TextBlock>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <Image    Width="46"
                               Source="../Assets/Images/chartType6.png"
                               Stretch="Fill"
                               Margin="0" />
                </RadioButton>
                <RadioButton Style="{StaticResource ChartTypeRadioButtonStyle}"
                                 GroupName="ChartTypeGroup"
                                 IsChecked="{Binding Path=SelectedChartType, ConverterParameter=StepArea, Converter={StaticResource StockChartTypeToBoolConverter}, Mode=TwoWay}"
                                 Margin="0,0,6,0"
                                 Cursor="Hand">
                    <ToolTipService.ToolTip>
                        <ToolTip Style="{StaticResource AppToolTipStyle}">
                            <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.ChartType_StepArea, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.ChartType_StepArea_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                            </TextBlock>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <Image     Width="46"
                               Source="../Assets/Images/chartType5.png"
                               Stretch="Fill"
                               Margin="0" />
                </RadioButton>
                <RadioButton Style="{StaticResource ChartTypeRadioButtonStyle}"
                                 GroupName="ChartTypeGroup"
                                 IsChecked="{Binding Path=SelectedChartType, ConverterParameter=OHLC, Converter={StaticResource StockChartTypeToBoolConverter}, Mode=TwoWay}"
                                 Margin="0,0,6,0"
                                 Cursor="Hand">
                    <ToolTipService.ToolTip>
                        <ToolTip Style="{StaticResource AppToolTipStyle}">
                            <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.ChartType_OHLC, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}" /><LineBreak />
                                <Run Text="{Binding Path=AppStrings.ChartType_OHLC_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                            </TextBlock>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <Image     Width="46"
                               Source="../Assets/Images/chartType2.png"
                               Stretch="Fill"
                               Margin="0" />
                </RadioButton>
                <RadioButton Style="{StaticResource ChartTypeRadioButtonStyle}"
                                 GroupName="ChartTypeGroup"
                                 IsChecked="{Binding Path=SelectedChartType, ConverterParameter=CS, Converter={StaticResource StockChartTypeToBoolConverter}, Mode=TwoWay}"
                                 Margin="0,0,6,0"
                                 Cursor="Hand">
                    <ToolTipService.ToolTip>
                        <ToolTip Style="{StaticResource AppToolTipStyle}">
                            <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.ChartType_CandleStick, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}"/><LineBreak />
                                <Run Text="{Binding Path=AppStrings.ChartType_CandleStick_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                            </TextBlock>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <Image     Width="46"
                               Source="../Assets/Images/chartType4.png"
                               Stretch="Fill"
                               Margin="0" />
                </RadioButton>

                <!-- Choose Chart Trendline -->
                <StackPanel Orientation="Horizontal" Visibility="Collapsed">
                    <TextBlock  Text="{Binding Path=AppStrings.Chart_Trendline, Source={StaticResource AppLocalizer}, Mode=OneTime}" 
                            Style="{StaticResource ChooseChartTypeTitle}" VerticalAlignment="Center" Margin="0,0,5,0" />
                    <ComboBox x:Name="ChartTrendLineComboBox" VerticalAlignment="Center" Margin="0,0,5,0"
                          SelectionChanged="ChartTrendLineComboBox_OnSelectionChanged"
                          Style="{StaticResource ComboBoxStyle}">
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.Chart_Trendline, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}"/><LineBreak />
                                <Run Text="{Binding Path=AppStrings.Chart_Trendline_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </ComboBox>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock  Text="{Binding Path=AppStrings.Chart_AxisScale, Source={StaticResource AppLocalizer}, Mode=OneTime}" 
                            Style="{StaticResource ChooseChartTypeTitle}" VerticalAlignment="Center" Margin="0,0,5,0" />
                    <ComboBox x:Name="ChartScaleComboBox" VerticalAlignment="Center" Margin="0,0,5,0"
                          SelectionChanged="ChartScaleComboBox_OnSelectionChanged"
                          Style="{StaticResource ComboBoxStyle}">
                        <ToolTipService.ToolTip>
                            <ToolTip Style="{StaticResource AppToolTipStyle}">
                                <TextBlock Style="{StaticResource TooltipText}">
                                <Run Text="{Binding Path=AppStrings.Chart_AxisScale, Source={StaticResource AppLocalizer}, Mode=OneTime}" FontWeight="Bold" Foreground="{StaticResource MetroAccentColor}"/><LineBreak />
                                <Run Text="{Binding Path=AppStrings.Chart_AxisScale_Desc, Source={StaticResource AppLocalizer}, Mode=OneTime}" />
                                </TextBlock>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                    </ComboBox>
                </StackPanel>

            </StackPanel>
        </Grid>
      
        <!-- Stock Chart -->
        <Grid Grid.Row="4">
            <localControls:DataChartEx x:Name="StockPriceChart" 
                                  DataContext="{Binding}" 
                                  SeriesSource="{Binding Path=Tickers}"
                                  SeriesTemplateSelector="{StaticResource StockValueChartTypeTemplateSelector}"
                                  AxisCategoryXTemplateSelector="{StaticResource StockValueChartTypeXAxisTemplateSelector}"
                                  AxisCategoryYTemplateSelector="{StaticResource StockValueChartTypeYAxisTemplateSelector}"
                                  SelectedChartType="{Binding Path=SelectedChartType}"
                                  HorizontalZoomable="True"
                                  HorizontalZoombarVisibility="Collapsed"
                                  VerticalZoombarVisibility="Collapsed"
                                  VerticalZoomable="False"
                                  Margin="25,8,0,0"
                                  PlotAreaBorderThickness="0"
                                  PlotAreaMinHeight="0"
                                  PlotAreaMinWidth="0" 
                                  PlotAreaBackground="Transparent"
                                  Padding="0" PlotAreaBorderBrush="Transparent" 
                                  Background="Transparent"
                                  Foreground="{StaticResource LightForeground}"
                                  ToolTipStyle="{StaticResource SeriesToolTipStyle}" > 
                <ig:SyncManager.SyncSettings>
                    <ig:SyncSettings SyncChannel="Group1"
                                     SynchronizeHorizontally="True"
                                     SynchronizeVertically="True" />
                </ig:SyncManager.SyncSettings>
            </localControls:DataChartEx>
            <!-- Stock Price Chart Label -->
            <Grid  Style="{StaticResource ChartTitleGrid}"
                   Background="{x:Null}">
                <Rectangle Fill="{StaticResource ChartTitleBackground}"     />
                <TextBlock Text="{Binding Path=AppStrings.Stock_Price, Source={StaticResource AppLocalizer}, Mode=OneTime}"
                               Style="{StaticResource ChartTitle}" />
            </Grid>
        </Grid>
        <!--Style="{StaticResource GridSplitterStyle}"-->
        <common:GridSplitter Grid.Row="5" Height="15" BorderThickness="0"  
                             Background="{StaticResource GridSplitterBackground}"
                             Foreground="{StaticResource GridSplitterForeground}"
                      HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                      ShowsPreview="True"   Margin="0" />

        <!-- Sales Volume Chart-->
        <Grid x:Name="StockVolumeChartContainer" Grid.Row="6" Margin="0,0,0,0">
            <ig:XamDataChart x:Name="StockVolumeChart"  
                             DataContext="{Binding Path=SelectedStock}"
                             ToolTipStyle="{StaticResource SeriesToolTipStyle}"
                             HorizontalZoombarVisibility="Collapsed"
                             VerticalZoombarVisibility="Collapsed"
                             VerticalZoomable="False"
                             HorizontalZoomable="True"
							 Margin="25,5,0,5"
                             PlotAreaBorderThickness="0"
                             PlotAreaBackground="Transparent"
                             PlotAreaBorderBrush="Transparent"
                             Background="Transparent">
                <ig:SyncManager.SyncSettings>
                    <ig:SyncSettings SyncChannel="Group1"
                                     SynchronizeHorizontally="True"
                                     SynchronizeVertically="True" />
                </ig:SyncManager.SyncSettings>
                <ig:XamDataChart.Axes>
                    <ig:CategoryXAxis x:Name="VolumeXAxis"
                                              ItemsSource="{Binding Path=FilteredData}"
                                              Gap="0" Label="{}{Date:d}" 
                                              Strip="Transparent"
                                              MajorStroke="Transparent"
                                              Stroke="Transparent">
                        <ig:CategoryXAxis.LabelSettings>
                            <ig:AxisLabelSettings Visibility="Collapsed" />
                        </ig:CategoryXAxis.LabelSettings>
                    </ig:CategoryXAxis>
                    <ig:CategoryXAxis x:Name="VolumeHighlightXAxis"
                                              ItemsSource="{Binding Path=FilteredData}"
                                              Gap="0" Label="{}{Date:d}" 
                                              Strip="Transparent"
                                              MajorStroke="Transparent"
                                              Stroke="Transparent">
                        <ig:CategoryXAxis.LabelSettings>
                            <ig:AxisLabelSettings Visibility="Collapsed" />
                        </ig:CategoryXAxis.LabelSettings>
                    </ig:CategoryXAxis>
                    <ig:NumericYAxis x:Name="VolumeYAxis"
                                     Strip="Transparent" Label="{}{0:#,#0,,.##} M"
                                     MajorStroke="Transparent" 
                                     IsLogarithmic="False"
									 Stroke="Transparent">
                        <ig:NumericYAxis.LabelSettings>
                            <ig:AxisLabelSettings Foreground="{StaticResource AxisForegroundBrush}"
                                                  FontFamily="Arial"
                                                  FontSize="12" Margin="0,6,0,6"
                                                  Location="OutsideRight"
                                                  Extent="60"/>
                        </ig:NumericYAxis.LabelSettings>
                    </ig:NumericYAxis>
                </ig:XamDataChart.Axes>
                <ig:XamDataChart.Series>
                    <!-- Volume Info and Selection Series -->
                    <ig:ColumnSeries ItemsSource="{Binding Path=FilteredData}"
                                     Title="{Binding Path=Details.Name, Mode=OneWay}"
                                     XAxis="{Binding ElementName=VolumeXAxis}"
                                     YAxis="{Binding ElementName=VolumeYAxis}"
                                     ValueMemberPath="Volume" MarkerType="None"
                                     Outline="Transparent" Brush="Gray"   
                                     LegendItemBadgeTemplate="{StaticResource VolumeSeriesItemBadgeTemplate}"
                                     IsCustomCategoryStyleAllowed="True"
                                     AssigningCategoryStyle="OnAssigningVolumeSeriesHighlightStyle"
                                     TransitionDuration="0:0:1" TransitionInDuration="0:0:2"
                                     IsTransitionInEnabled="True" IsHighlightingEnabled="True">
                        <ig:ColumnSeries.CacheMode>
                            <BitmapCache />
                        </ig:ColumnSeries.CacheMode>
                        <ig:ColumnSeries.TransitionEasingFunction>
                            <CubicEase EasingMode="EaseOut" />
                        </ig:ColumnSeries.TransitionEasingFunction>
                        <ig:ColumnSeries.ToolTip>
                            <StackPanel Orientation="Vertical" MinWidth="110">
                                <TextBlock HorizontalAlignment="Left" Text="{Binding Path=Series.Title}" Style="{StaticResource TooltipText}" Foreground="{Binding Path=Series.Brush}"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock HorizontalAlignment="Left" Text="{Binding Path=Item.Date, Converter={StaticResource DateToStringConverter}}" Style="{StaticResource TooltipText}" Foreground="{StaticResource SeriesTooltipForeground}"  Margin="0,0,4,0" />
                                    <TextBlock HorizontalAlignment="Left" Text="{Binding Path=Item.Volume, Converter={StaticResource StringFormatConverter}, ConverterParameter='\{0:#,#0,,.##} M'}" Style="{StaticResource TooltipText}" Foreground="{StaticResource SeriesTooltipForeground}" />
                                </StackPanel>
                            </StackPanel>
                        </ig:ColumnSeries.ToolTip>
                    </ig:ColumnSeries>
                    <ig:AreaSeries x:Name="VolumeAreaSeries" 
                                   ItemsSource="{Binding Path=FilteredData}"
                                   Title="{Binding Path=Details.Name, Mode=OneWay}"  
                                   XAxis="{Binding ElementName=VolumeXAxis}"
                                   YAxis="{Binding ElementName=VolumeYAxis}"  
                                   ValueMemberPath="Volume" MarkerType="None" Thickness="1"
                                   Outline="Gray" Brush="#F0505050" Visibility="Collapsed"
                                   LegendItemBadgeTemplate="{StaticResource VolumeSeriesItemBadgeTemplate}"
                                   TransitionDuration="0:0:1" TransitionInDuration="0:0:2"
                                   IsTransitionInEnabled="True" IsHighlightingEnabled="True">
                        <ig:AreaSeries.CacheMode>
                            <BitmapCache />
                        </ig:AreaSeries.CacheMode>
                        <ig:AreaSeries.TransitionEasingFunction>
                            <CubicEase EasingMode="EaseOut" />
                        </ig:AreaSeries.TransitionEasingFunction>
                        <ig:AreaSeries.ToolTip>
                            <StackPanel Orientation="Vertical" MinWidth="110">
                                <TextBlock HorizontalAlignment="Left" Text="{Binding Path=Series.Title}" Style="{StaticResource TooltipText}" Foreground="{Binding Path=Series.Outline}"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock HorizontalAlignment="Left" Text="{Binding Path=Item.Date, Converter={StaticResource DateToStringConverter}}" Style="{StaticResource TooltipText}" Foreground="{StaticResource SeriesTooltipForeground}"  Margin="0,0,4,0" />
                                    <TextBlock HorizontalAlignment="Left" Text="{Binding Path=Item.Volume, Converter={StaticResource StringFormatConverter}, ConverterParameter='\{0:#,#0,,.##} M'}" Style="{StaticResource TooltipText}" Foreground="{StaticResource SeriesTooltipForeground}" />
                                </StackPanel>
                            </StackPanel>
                        </ig:AreaSeries.ToolTip>
                    </ig:AreaSeries>

                    <ig:CrosshairLayer TransitionDuration="0:00:00.5" UseInterpolation="False"/>
                    <ig:ItemToolTipLayer TransitionDuration="0:00:00.5" UseInterpolation="False" 
                                         ToolTipStyle="{StaticResource SeriesToolTipStyle}"/>
                    <!--<ig:CategoryItemHighlightLayer TransitionDuration="0:00:00.5" UseInterpolation="True" HighlightType="Marker"
                                                   MarkerTemplate="{StaticResource ItemHighlightMarkerTemplate}"
                                                   TargetSeries="{Binding ElementName=VolumeAreaSeries}"/>-->
                 </ig:XamDataChart.Series>
            </ig:XamDataChart>
            <!-- Sales Volume Label -->
            <Grid  Style="{StaticResource ChartTitleGrid}" >
            	<Rectangle Fill="{StaticResource ChartTitleBackground}"     />
            	<TextBlock Text="{Binding Path=AppStrings.Sales_Volume, Source={StaticResource AppLocalizer}, Mode=OneTime}"
            		Style="{StaticResource ChartTitle}" />
            </Grid>
            <!-- Sales Volume Label -->
        </Grid>
        <!-- Zoom bar -->
        <Grid x:Name="ZoombarContainer" Grid.Row="7">

            <localControls:ZoombarEx   
                                d:LayoutOverrides="Height"
                                Target="{Binding ElementName=StockPriceChart, Path=HorizontalZoombar}"
                                Style="{StaticResource XamZoombarHighlightedStyle}">
                 <ig:XamZoombar.HorizontalPreviewContent>
                    <Grid>
                        <ig:XamDataChart x:Name="StockZoombarChart" 
                                     DataContext="{Binding Path=SelectedStock, Mode=OneWay}"
                                     HorizontalZoombarVisibility="Collapsed"
                                     VerticalZoombarVisibility="Collapsed"
                                     Margin="5,0,5,0"
                                     PlotAreaBorderThickness="0"
                                     PlotAreaBackground="Transparent"
                                     Background="Transparent"
                                     Padding="0">
                            <ig:XamDataChart.Axes>
                                <ig:CategoryXAxis x:Name="StockZoombarXAxis"
                                                      ItemsSource="{Binding Path=FilteredData, Mode=OneWay}"
                                                      Label="{}{Date:yyyy}"
                                                      Strip="Transparent"
                                                      MajorStroke="Transparent"
                                                      Stroke="#00000000">
                                    <ig:CategoryXAxis.LabelSettings>
                                        <ig:AxisLabelSettings  Visibility="Visible" 
                                                           Foreground="{StaticResource AxisForegroundBrush}"/>
                                    </ig:CategoryXAxis.LabelSettings>
                                </ig:CategoryXAxis>
                                <ig:NumericYAxis x:Name="StockZoombarYAxis"
                                             Strip="Transparent"
                                             MajorStroke="Transparent"
                                             Stroke="#00000000">
                                    <ig:NumericYAxis.LabelSettings>
                                        <ig:AxisLabelSettings  Visibility="Collapsed" />
                                    </ig:NumericYAxis.LabelSettings>
                                </ig:NumericYAxis>
                            </ig:XamDataChart.Axes>
                            <ig:XamDataChart.Series>
                                <ig:LineSeries ItemsSource="{Binding Path=FilteredData, Mode=OneWay}"
                                       TransitionDuration="0:0:1" TransitionInDuration="0:0:2"
                                       IsTransitionInEnabled="True" IsHighlightingEnabled="False"
                                       ValueMemberPath="Close" MarkerType="None"
                                       Brush="{StaticResource PriceSeriesZoombarBrush}"
                                       XAxis="{Binding ElementName=StockZoombarXAxis}"
                                       YAxis="{Binding ElementName=StockZoombarYAxis}"
                                       FontFamily="Arial" />
                            </ig:XamDataChart.Series>
                        </ig:XamDataChart>
                        <!--<localControls:DataChartEx x:Name="StockZoombarChart2" 
                                  DataContext="{Binding}" 
                                  SeriesSource="{Binding Path=Tickers}"
                                  SeriesMouseEnter="OnSeriesMouseEnter"
                                  SeriesMouseLeave="OnSeriesMouseLeave"
                                  SeriesTemplateSelector="{StaticResource StockZoomChartTypeTemplateSelector}"
                                  AxisCategoryXTemplateSelector="{StaticResource StockValueChartTypeXAxisTemplateSelector}"
                                  AxisCategoryYTemplateSelector="{StaticResource StockZoomChartTypeYAxisTemplateSelector}"
                                  AxisCategoryYVisibility="Collapsed"
                                  SelectedChartType="Line"
                                  HorizontalZoomable="False"
                                  HorizontalZoombarVisibility="Collapsed"
                                  VerticalZoombarVisibility="Collapsed"
                                  Margin="10,0,15,0"
                                  PlotAreaBorderThickness="0"
                                  PlotAreaMinHeight="0"
                                  PlotAreaMinWidth="0" 
                                  PlotAreaBackground="Transparent"
                                  Padding="0" PlotAreaBorderBrush="Transparent" 
                                  Foreground="{StaticResource LightForeground}" >
                        </localControls:DataChartEx>-->

                    </Grid>

                 </ig:XamZoombar.HorizontalPreviewContent>
            </localControls:ZoombarEx>
            <Grid  Style="{StaticResource ChartTitleGrid}" IsHitTestVisible="False"
                   Background="{x:Null}">
                <Rectangle Fill="{StaticResource ChartTitleBackground}"     />
                <TextBlock Text="{Binding Path=AppStrings.Price_Over_Time, Source={StaticResource AppLocalizer}, Mode=OneTime}"
            		Style="{StaticResource ChartTitle}" />
            </Grid>

        </Grid>

        <!--IsInitialStockDetailsLoading-->
        <common:PageBusyIndicator x:Name="BusyIndicator"  
                                  Grid.RowSpan="13"  
                                  Visibility="Visible" 
                                  IndicatorIsBusy="{Binding Path=IsInitialStockDataLoading, Mode=OneWay}"
                                  IndicatorOverlayBrush="Black" IndicatorOverlayOpacity="0.8"
                                   />
        
    </Grid>
</framework:NavigationPage>
